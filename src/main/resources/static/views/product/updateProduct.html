<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>编辑产品类型</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
</head>
<body>
    <div class="layui-container">
        <div class="layui-row">
            <div class="layui-col-md8">
                <form class="layui-form" lay-filter="updateTypeForm" style="margin-top: 20px">
                    <!--隐藏域，用于接收父层传递过来的id值-->
                    <input type="hidden" name="id" id="typeId">
                    <div class="layui-form-item">
                        <label class="layui-form-label">产品名称：</label>
                        <div class="layui-input-block">
                            <input id="pname" type="text" name="pname" lay-verify="title" autocomplete="off"
                                   placeholder="请输入产品名称" class="layui-input" style="width: 300px">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">修改图片：</label>
                        <div class="layui-input-block">
                            <img src="/images/productImg/p1.png" width="50px" height="50px">
                            <input  class="pimageurl"   type="radio" name="imageName" value="p1">

                            <img src="/images/productImg/p2.png" width="50px" height="50px">
                            <input  class="pimageurl"  type="radio" name="imageName" value="p2">

                            <img src="/images/productImg/p3.png" width="50px" height="50px">
                            <input   class="pimageurl"  type="radio" name="imageName" value="p3">

                            <img src="/images/productImg/p4.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p4">

                            <br><br>

                            <img src="/images/productImg/p5.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p5">

                            <img src="/images/productImg/p6.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p6">

                            <img src="/images/productImg/p7.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p7">

                            <img src="/images/productImg/p8.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p8">

                            <br><br>
                            <img src="/images/productImg/p9.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p9">

                            <img src="/images/productImg/p10.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p10">

                            <img src="/images/productImg/p11.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p11">

                            <img src="/images/productImg/p12.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p12">

                            <br><br>
                            <img src="/images/productImg/p13.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p13">

                            <img src="/images/productImg/p14.png" width="50px" height="50px">
                            <input class="pimageurl" type="radio" name="imageName" value="p14">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">产品价格：</label>
                        <div class="layui-input-block">
                            <input id="tprice" type="text" name="tprice" lay-verify="title" autocomplete="off"
                                   placeholder="请输入产品价格" class="layui-input" style="width: 300px">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">产品描述：</label>
                        <div class="layui-input-block">
                            <input id="tintroduce" type="text" name="tintroduce" lay-verify="title" autocomplete="off"
                                   placeholder="请输入产品描述" class="layui-input" style="width: 300px">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">产品折扣：</label>
                        <div class="layui-input-block">
                            <input id="pdiscount" type="text" name="pdiscount" lay-verify="title" autocomplete="off"
                                   placeholder="请输入0~1的数" class="layui-input" style="width: 300px">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">是否为热饮：</label>
                        <div class="layui-input-block">
                            <input id="photstate" type="text" name="photstate" lay-verify="title" autocomplete="off"
                                   placeholder="请输入1或0" class="layui-input" style="width: 300px">
                        </div>
                    </div>

                    <span>注：在修改数据的时候，开关默认属于禁用状态；修改完数据后，请手动开启</span>
                    <hr>
                    <div class="layui-form-item" style="float: right">
                        <div class="layui-input-block">
                            <button type="reset" class="layui-btn">重置</button>
                            <button type="button" id="updateBtn" class="layui-btn layui-btn-warm">提交</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <script src="/layui/layui.js"></script>
        <script>
            layui.use('form', function(){
                var form = layui.form;
                var $ = layui.$;

                //方法提交
                $('#updateBtn').on('click', function(){
                    // 数据回显

                    // 提交数据
                    form.submit('updateTypeForm', function(data){
                        // data是表单中的数据
                        console.log(data.field);
                        let $id=data.field.id;
                        let $pname=data.field.pname;
                        let $imageName=data.field.imageName;
                        let $tprice=data.field.tprice;
                        let $tintroduce=data.field.tintroduce;
                        let $pdiscount=data.field.pdiscount;
                        let $photstate=data.field.photstate;
                        $.post("/product/updateProduct",{id:$id,pname:$pname,imageName:$imageName,
                            tprice:$tprice,tintroduce:$tintroduce,pdiscount:$pdiscount,photstate:$photstate},
                            function (d) {
                            //关闭当前的iframe弹出层
                            var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
                            parent.layer.close(index); //再执行关闭
                            //d:服务器返回的响应数据
                            if (d.code=="0"){
                                parent.layer.msg("修改成功。")
                            }else {
                                parent.layer.msg(d.code+":"+d.msg);
                            }
                        })
                    });
                });
            });
        </script>
    </div>
</body>
</html>